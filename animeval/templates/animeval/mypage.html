{% extends 'animeval/base.html' %}
{% load static %}

{% block content %}
<link rel="stylesheet" href="{% static '/css/profile.css' %}">

<div id = 'profile'>
    <section id = 'section1'>

        <div id = 'top'>
            <h4>{{profile.nickname}}</h4>
            <img src="{{profile.avator.url}}" alt="profile image" width = 100 height = 100 id = 'avator'>
        </div>

        <div id = 'data'>
            <ul id = 'count'>
                <li>
                    <p>{{profile.get_gender_display}}</p>
                    <label for = 'name'>gender</label>
                </li>
                <li>
                    <p>{{reviews.count}}件</p>
                    <label for = 'name'>投稿数</label>
                </li>
            </ul>
            <div id = 'update'>
                <a href="{%url 'animeval:update_profile' profile.id %}"><h6>プロフィールを編集</h6></a>
            </div>
        </div>

    </section>

    <section id = 'section2'>

        <div id = 'list'>
            <div id = 'title'>
                <h6 id = 'title_post'>投稿一覧</h6>
                <form method="GET" action="#" class = search_container id = 'search_box'>
                    <input type="text" name="q" placeholder = 'キーワードを検索' value="{{request.GET.q}}" size = '25'>
                    <i class="fas fa-search"></i>
                    <button type="submit"></button>
                </form>
            </div>
            <div id = 'review-list'>
                {% for review in reviews %}
                    <div id = 'review'>
                        <div id = 'title1'>
                            <div id = 'review-title'>
                                <h4>{{review.evaluation_ave}}</h4>
                                <h4>{{review.review_title}}</h4>
                            </div>
                            <div id = 'anime-title'>
                                <h6>Anime : {{review.anime_title.anime_title}}</h6>
                            </div>
                        </div>
                            <div id = 'review-content'>
                                <p id = 'content'>{{review.review_content | linebreaksbr}}</p>
                            </div>
                        <div id = 'icon'>
                            <p>{{review.nickname.nickname}}</p>
                            <p>{{review.post_date}}</p>
                            <p>Comment <i class="fas fa-comments"></i> ({{review.comment_set.count}})</p> 
                            <p>イイね<i class="fas fa-thumbs-up"></i> ({{review.like_set.count}})</p>
                        </div>
                        <div id = 'update-delete'>
                            <a href="{% url 'animeval:update_review' review.pk %}">編集する</a>
                            <a href="{% url 'animeval:delete_review' review.pk %}">削除する</a>
                        </div>
                    </div>
                {% endfor %}
            </div>
            <div id = 'context'>
                <h2>{{ context2 }}</h2>
            </div>
        </div>

    </section>
</div>
<script src = "{% static '/javascript/profile.js' %}"></script>
{% endblock content %}